<div class="container py-5">

  <div *ngIf="cargando" class="text-center">
    <div class="spinner-border text-primary"></div>
    <p class="mt-3">Cargando votación...</p>
  </div>

  <div *ngIf="mensajeError" class="alert alert-danger text-center">
    {{ mensajeError }}
  </div>

  <div *ngIf="mensajeExito" class="alert alert-success text-center">
    ¡Voto registrado correctamente!
  </div>

  <div *ngIf="estudiante && !cargando" class="card shadow mb-4 header-card">
    <div class="card-body text-center">
      <h4>Proceso de Votación Estudiantil</h4>
      <p class="mb-1"><strong>Nombre:</strong> {{ estudiante.nombre }}</p>
      <p class="mb-1"><strong>Carrera:</strong> {{ estudiante.carrera }}</p>
    </div>
  </div>

  <div *ngIf="yaVoto" class="alert alert-info text-center">
    Ya has emitido tu voto. Gracias por participar.
  </div>

  <div *ngIf="!yaVoto && !cargando">

    <h5 class="mb-3 text-center">Selecciona una planilla</h5>

    <div class="row">

      <div 
        class="col-md-4 mb-4"
        *ngFor="let planilla of planillas"
      >
        <div 
          class="card shadow-sm h-100"
          (click)="seleccionarPlanilla(planilla)"
        >
          <div class="card-body text-center">

            <h5 class="fw-bold">{{ planilla.nombrePlanilla }}</h5>

            <p><strong>Presidente:</strong> {{ planilla.presidente }}</p>
            <p><strong>Vicepresidente:</strong> {{ planilla.vicepresidente }}</p>
            <p><strong>Secretario:</strong> {{ planilla.secretario }}</p>

            <p class="text-muted mt-2">
              {{ planilla.descripcionGeneral }}
            </p>

            <button class="btn btn-primary btn-sm mt-2">
              Votar
            </button>

          </div>
        </div>
      </div>

    </div>
  </div>

</div>

<div class="modal-backdrop-custom" *ngIf="mostrarConfirmacion">

  <div class="modal-custom">

    <h5>Confirmar voto</h5>

    <p>
      ¿Deseas votar por 
      <strong>{{ planillaSeleccionada?.nombrePlanilla }}</strong>?
    </p>

    <div class="d-flex justify-content-center gap-3">

      <button 
        class="btn btn-secondary"
        (click)="cancelarVoto()"
      >
        Cancelar
      </button>

      <button 
        class="btn btn-success"
        (click)="confirmarVoto()"
        [disabled]="votando"
      >
        {{ votando ? 'Registrando...' : 'Confirmar' }}
      </button>

    </div>

  </div>
</div>