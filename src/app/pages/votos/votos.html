<div class="container py-5">

  <!-- ðŸ”„ CARGANDO -->
  <div *ngIf="cargando" class="text-center">
    <div class="spinner-border text-primary"></div>
    <p class="mt-3">Cargando votaciÃ³n...</p>
  </div>

  <!-- âŒ ERROR -->
  <div *ngIf="mensajeError" class="alert alert-danger text-center">
    {{ mensajeError }}
  </div>

  <!-- âœ… MENSAJE Ã‰XITO -->
  <div *ngIf="mensajeExito" class="alert alert-success text-center">
    Â¡Voto registrado correctamente!
  </div>

  <!-- ðŸ‘¨â€ðŸŽ“ ENCABEZADO -->
  <div *ngIf="estudiante && !cargando" class="card shadow mb-4 header-card">
    <div class="card-body text-center">
      <h4>Proceso de VotaciÃ³n Estudiantil</h4>
      <p class="mb-1"><strong>Nombre:</strong> {{ estudiante.nombre }}</p>
      <p class="mb-1"><strong>Carrera:</strong> {{ estudiante.carrera }}</p>
    </div>
  </div>

  <!-- ðŸ›‘ YA VOTÃ“ -->
  <div *ngIf="yaVoto" class="alert alert-info text-center">
    Ya has emitido tu voto. Gracias por participar.
  </div>

  <!-- ðŸ—³ï¸ LISTA DE CANDIDATOS -->
  <div *ngIf="!yaVoto && !cargando">

    <h5 class="mb-3 text-center">Selecciona un candidato</h5>

    <div class="row">

      <div 
        class="col-md-4 mb-4"
        *ngFor="let candidato of candidatos"
      >
        <div 
          class="card candidato-card shadow-sm h-100"
          (click)="seleccionarCandidato(candidato)"
        >

          <div class="card-body text-center">

            <img 
              [src]="candidato.foto || 'assets/user.png'" 
              class="foto-candidato mb-3"
            >

            <h6>{{ candidato.nombre }}</h6>
            <p class="text-muted">{{ candidato.propuesta }}</p>

            <button class="btn btn-primary btn-sm mt-2">
              Votar
            </button>

          </div>
        </div>
      </div>

    </div>
  </div>

</div>

<!-- ðŸ§¾ MODAL CONFIRMACIÃ“N -->
<div class="modal-backdrop-custom" *ngIf="mostrarConfirmacion">

  <div class="modal-custom">

    <h5>Confirmar voto</h5>

    <p>
      Â¿Deseas votar por 
      <strong>{{ candidatoSeleccionado?.nombre }}</strong>?
    </p>

    <div class="d-flex justify-content-center gap-3">

      <button 
        class="btn btn-secondary"
        (click)="cancelarVoto()"
      >
        Cancelar
      </button>

      <button 
        class="btn btn-success"
        (click)="confirmarVoto()"
        [disabled]="votando"
      >
        {{ votando ? 'Registrando...' : 'Confirmar' }}
      </button>

    </div>

  </div>
</div>
